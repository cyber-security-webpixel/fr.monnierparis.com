async function prepareDynamicJSFor(a,b,c,d){window.CJClientApi||(window.CJClientApi={}),window.Shopify||(window.Shopify={});const e=window.cjShopifyDataCustomPixel;if(d.isPixelConnected){if("undefined"!=typeof e&&null!==e){let c=parseCJShopifyData(JSON.parse(e)),f=getShopifyCheckout(c,d);await processCheckoutData(f,!1,d,c,a,b)}else{let{cjevent:a,cjdata:b}=getEventIdAndCJDataFromUrl();window.CJClientApi.tagDataPromise=Promise.resolve({cjevent:a,cjdata:b})}}else if(Shopify.checkout)"undefined"!=typeof cjShopifyData&&cjShopifyData?await processCheckoutData(Shopify.checkout,!0,d,cjShopifyData,a,b):console.log("cjShopifyData not found");else{const{cjevent:a,cjdata:b}=getEventIdAndCJDataFromUrl();(a||b)&&saveCJEventIdIntoCart(a,b),window.CJClientApi.tagDataPromise=getCJEventIdFromCart()}const f=document.createElement("script");f.src=`https://www.mczbf.com/tags/${c}/tag.js`,f.type="text/javascript",f.async=!0,f.id="cjapitag",document.head.appendChild(f)}function parseCJShopifyData(a){return{currency:a.currencyCode||"",subTotalamount:a.subtotalPrice?.amount||0,totalAmount:a.totalPrice?.amount||0,taxAmount:a.totalTax?.amount||0,shippingAddress:a.shippingAddress||{},shippingAmount:a.shippingLine?.price?.amount||0,items:a.lineItems||[],shopifyOrderId:a.order||{},discount:a.discountApplications||[]}}async function processCheckoutData(a,b,c,d,e,f){window.cj={},window.cj.order={},window.cj.source={},shopifyCheckout=JSON.parse(JSON.stringify(a));const g=a;b?(taxes_exclusion_required=d.taxes_exclusion_required,taxToBeDivided=taxes_exclusion_required&&g.tax_lines&&0<g.tax_lines.length?getTaxTobeDividedVal(g.tax_lines):1):(taxes_exclusion_required=c.isTaxExclusionRequired,taxToBeDivided=taxes_exclusion_required&&g.tax_lines&&0<g.tax_lines.length&&0!=g.total_tax?getTaxTobeDividedVal(g.tax_lines):1,d=await getCJShopifyData(d,c,taxToBeDivided,g.customer_id)),e=parseInt(`${e}`),isVariantIdReplaceSku=!!d.replace_sku_with_variant_id&&!0==d.replace_sku_with_variant_id;const h={enterpriseId:e,pageType:"conversionConfirmation",cjPlugin:"Shopify",userId:g.customer_id?g.customer_id+"":"",actionTrackerId:parseInt(`${f}`),currency:g.presentment_currency?g.presentment_currency+"":"",amount:g.subtotal_price?getNumber(g.subtotal_price):0,coupon:g.discount?getCoupon(g.discount):"",taxAmount:g.total_tax?g.total_tax:0,customerCountry:g.shipping_address?findCountryName(g.shipping_address):"",items:g.line_items?makeItemList(g.line_items):"",discount:g.discount?getDiscount(g.discount):0,shopifyOrderId:g.order_id?g.order_id+"":""};if(zeroTaxAmount(h)&&(taxToBeDivided=1),d.ordersCount){const a=+d.ordersCount;h.customerStatus=-1==a?"":1>=a?"New":"Return"}d.orderId&&(h.orderId=d.orderId),d.items&&setDiscountAndUnitPrice(h,d),d.taxes_exclusion_required&&(h.amount=getTaxFreeAmount()),b&&isShippingDiscount(g)&&(h.discount=0);const i={enterpriseId:h.enterpriseId,pageType:h.pageType,userId:h.userId,cartSubtotal:h.amount,items:h.items},j={name:h.cjPlugin,version:b?"1.0.0":"2.0.0"};window.cj.order=cleanObject(h),window.cj.sitePage=cleanObject(i),window.cj.source=cleanObject(j)}function getShopifyCheckout(a,b){let c=a.shopifyOrderId,d=[],e=a.taxAmount||0,f=[],g=0,h=[];a.discount.forEach(function(a){h.push(a.title)}),a.items.forEach(function(a){let c=0;if(a.discountAllocations&&0<a.discountAllocations.length){let d=0,e=0;a.discountAllocations.forEach(function(a){"ACROSS"===a.discountApplication.allocationMethod&&"ALL"===a.discountApplication.targetSelection?d+=1:e+=1}),a.discountAllocations.forEach(function(a){c+=0<d&&0<e?b.isTaxExclusionRequired?a.amount?.amount||0:"ACROSS"===a.discountApplication.allocationMethod&&"ALL"===a.discountApplication.targetSelection?a.amount?.amount||0:0:a.amount?.amount||0})}g+=c,f.push({variant_id:a.variant?.id||"",sku:a.variant?.sku||"",price:a.variant?.price?.amount?.toFixed(2)||0,quantity:a.quantity||0})});let i={price:a.shippingAmount?.toFixed(2)||0},j={province_code:a.shippingAddress?.provinceCode||"",country_code:a.shippingAddress?.countryCode||""},k={amount:g.toFixed(2),code:h.join(",")};if(b.taxLines&&0<b.taxLines.length){let a;b.taxLines.forEach(b=>{const{code:c,provinces:e}=b;if(j.country_code===c){if(e&&0<e.length){const a=e.find(a=>a.code===j.province_code);a&&d.push({rate:a.tax,title:a.tax_name})}d.push({rate:b.tax,title:b.tax_name})}else"*"===c&&(a={rate:b.tax,title:b.tax_name})}),0===d.length&&a&&d.push(a)}let l={order_id:c.id||"",customer_id:c.customer?.id||"",presentment_currency:a.currency||"",subtotal_price:a.subTotalamount?.toFixed(2)||0,taxes_included:b.isTaxIncluded,tax_lines:d,total_price:a.totalAmount?.toFixed(2)||0,total_tax:e.toFixed(2),line_items:f,shipping_rate:i,shipping_address:j,discount:k};return l}async function getOrderCount(a,b,c){try{const d=await fetch(`${a}getOrderCount?shop=${b}&customerId=${c}`,{method:"GET"});if(200===d.status)return await d.json();console.error(`CJ PLUGIN : Error fetching order count for shop ${b}`)}catch(a){console.error(`CJ PLUGIN : Error fetching order count for shop ${b} :`,a)}return-1}async function getCJShopifyData(a,b,c,d){let e=await getOrderCount(b.originDomain,b.shop,d),f={ordersCount:e,taxes_exclusion_required:b.isTaxExclusionRequired,orderId:a.shopifyOrderId?.id||"",items:[]};return a.items.forEach(function(a){let d=0;a.discountAllocations&&0<a.discountAllocations.length&&a.discountAllocations.forEach(function(a){d+="EACH"===a.discountApplication.allocationMethod||"ACROSS"===a.discountApplication.allocationMethod&&"ENTITLED"===a.discountApplication.targetSelection?a.amount?.amount||0:0});let e=0;e=b.isTaxExclusionRequired?a.variant?.price?.amount?a.variant.price.amount/c:0:a.variant?.price?.amount||0,f.items.push({itemId:a.variant?.sku?handlelize(a.variant.sku):"",unitPrice:e,quantity:a.quantity||0,discount:d})}),f}var sumOfItemLevelUnitPrice,totalAmountCalculated=0,taxes_exclusion_required=!1,taxToBeDivided=1,totalItemLevelDiscountWithoutTax=0,totalDiscount=0,isVariantIdReplaceSku=!1,shopifyCheckout={};function setDiscountAndUnitPrice(a,b){(null==a.discount||0==a.discount)&&(a.discount=0),sumOfItemLevelUnitPrice=0;let c=0,d=!0,e=transformItemList(b.items);a.items=isVariantIdReplaceSku?replaceSkuWithVariantId(e):e;let f=a.amount;if(getNumber(shopifyCheckout.total_price)===getNumber(shopifyCheckout.subtotal_price)-getNumber(a.discount)+getNumber(shopifyCheckout.total_tax)+getNumber(shopifyCheckout.shipping_rate.price)){let b=getNumber(shopifyCheckout.subtotal_price)-getNumber(a.discount);f=b}let g=function(a){for(let b in a)if(0===a[b].unitPrice&&0<a[b].discount)return!0;return!1}(a.items);for(let d of b.items)sumOfItemLevelUnitPrice+=d.unitPrice*d.quantity,c+=d.discount;sumOfItemLevelUnitPrice=parseFloat(sumOfItemLevelUnitPrice.toFixed(2));let h=!!(0<c);if(!0==h?(totalAmountCalculated=getAmountPostDiscount(a.discount,sumOfItemLevelUnitPrice,c),taxes_exclusion_required?(a.items=a.items.map(a=>({...a,discount:reCalculateDiscountPrice(a.discount)})),totalItemLevelDiscountWithoutTax=a.items.reduce((a,b)=>a+ +b.discount,0),totalItemLevelDiscountWithoutTax=parseFloat(totalItemLevelDiscountWithoutTax).toFixed(2),d=!0):sumOfItemLevelUnitPrice>f&&sumOfItemLevelUnitPrice===parseFloat((c+f).toFixed(2))?d=!0:sumOfItemLevelUnitPrice>f&&0!==a.discount?totalAmountCalculated==f?d=!0:d=!1:sumOfItemLevelUnitPrice===f&&(d=!1)):d=!0,!1===d)a.items=a.items.map(a=>({...a,unitPrice:getFixedUnitPrice(a.unitPrice,a.discount,a.quantity)}));else if(taxes_exclusion_required){let b=reCalculateDiscountPrice(a.discount);if(totalItemLevelDiscountWithoutTax==b||null==shopifyCheckout.discount)a.discount=0,totalDiscount=totalItemLevelDiscountWithoutTax;else if(h&&totalItemLevelDiscountWithoutTax!=b){let c=(b-totalItemLevelDiscountWithoutTax).toFixed(2),d=0;if(g){a.items=a.items.map(a=>({...a,unitPrice:0===a.unitPrice?parseFloat(getFixedUnitPrice(a.unitPrice,a.discount,a.quantity)):a.unitPrice}));for(let b of a.items)b.unitPrice==b.discount&&(d+=parseFloat(b.discount));c=parseFloat(c)+d}a.discount=parseFloat(c).toFixed(2),totalDiscount=b}else totalDiscount=b,a.discount=totalDiscount}else totalAmountCalculated!=f&&(a.discount=0===a.discount?0:a.discount.toFixed(2)-c.toFixed(2))}function replaceSkuWithVariantId(a){let b=a.map(a=>{let b=shopifyCheckout.line_items.find(b=>handlelize(b.sku)==a.itemId);return{...a,itemId:b.variant_id}});return b}function reCalculateDiscountPrice(a){return a?parseFloat(a/taxToBeDivided).toFixed(2):parseFloat(a).toFixed(2)}function getTaxTobeDividedVal(a){let b=a.reduce((a,b)=>a+ +b.rate,1);return parseFloat(b).toFixed(2)}function getAmountPostDiscount(a,b,c){var d=0,e=b-(a+c);return e=e.toFixed(2),d=parseFloat(e),d}function getDiscount(a){return a.amount?getNumber(a.amount):0}function getCoupon(a){return a.code?a.code:""}function isShippingDiscount(a){let b=getNumber(a.total_tax);a.taxes_included&&(b=0);const c=getNumber(a.total_price),d=getNumber(a.subtotal_price);let e=0;a.shipping_rate&&(e=getNumber(a.shipping_rate.price));const f=c-b-d;let g=!0;if(0!=e&&.01>f.toFixed(2)-e.toFixed(2)){let b=sumOfItemLevelUnitPrice;a.discount!=null&&(b-=getNumber(a.discount.amount)),b>=d&&(g=!1)}return 0!=e&&f.toFixed(2)<e.toFixed(2)&&g}function getOrderLevelDiscount(a){let b=0;return a&&(b=a.map(a=>getNumber(a.discount)).reduce((a,b)=>a+b)),b}function trimSpace(a){return a.trim()}function transformItemList(a){let b=a.map(a=>({...a,itemId:trimSpace(a.itemId),unitPrice:+parseFloat(a.unitPrice).toFixed(2)}));return b}function makeItemList(a){if(a){let b=a.map(a=>({itemId:isVariantIdReplaceSku?a.variant_id:a.sku?trimSpace(a.sku):"",unitPrice:a.price?getNumber(a.price):0,quantity:a.quantity?getNumber(a.quantity):0,discount:""}));return b}return[]}function findCountryName(a){return a?a.country_code?a.country_code:"":""}function getEventIdAndCJDataFromUrl(){const a=window.location.search,b=new URLSearchParams(a),c=b.get("cjevent"),d=b.get("cjdata");return{cjevent:c,cjdata:d}}function getCJEventIdFromCart(){return fetch("/cart.js").then(a=>a.json()).then(({attributes:a={}})=>{const{cjevent:b,cjdata:c}=a;return{cjevent:b,cjdata:c}}).catch(()=>({}))}async function saveCJEventIdIntoCart(a,b){try{const c=new FormData;a&&c.append("attributes[cjevent]",a),b&&c.append("attributes[cjdata]",b);const d=await fetch("/cart/update.js",{body:c,method:"post"}),e=await d.json();(e.attributes==null||e.attributes.cjevent==null)&&console.error("CJ PLUGIN : Unexpected error occurred in saving cart attribute")}catch(a){console.error("CJ PLUGIN : Unexpected error occurred in saving cart attribute")}}function cleanObject(a){return a.items&&removeItemDiscountWithValueZero(a.items),getDefinedProps(a)}function removeItemDiscountWithValueZero(a){a.forEach(a=>{for(let b in a)value=a[b],"discount"==b&&0===value&&delete a[b]})}function isArray(a){return"[object Array]"===Object.prototype.toString.call(a)}function getDefinedProps(a){for(let b in a)value=a[b],(""===value||null===value||void 0===value)&&"itemId"!==b?delete a[b]:isArray(value)&&value.forEach(a=>{getDefinedProps(a)});return a}function getNumber(a){return isNaN(a)?0:+a}function getFixedUnitPrice(a,b,c){return parseFloat(a+b/c).toFixed(2)}function handlelize(a){return a=a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/([^\w]+|\s+)/g,"-").replace(/\-\-+/g,"-").replace(/(^-+|-+$)/g,"").toLowerCase(),a}function getTaxFreeAmount(){return parseFloat(sumOfItemLevelUnitPrice-totalDiscount).toFixed(2)}function zeroTaxAmount(a){return!(0!=a.taxAmount)}
prepareDynamicJSFor(1531359,430745,179299059858,{"isPixelConnected":false})